webpackJsonp([1],{"3K+o":function(e,t){},"4phQ":function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("7+uW"),s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var i=n("VU/8")({name:"App"},s,!1,function(e){n("lx7Z")},null,null).exports,o=n("/ocq"),r=n("//Fk"),l=n.n(r),c=n("Muz9"),u=n.n(c).a.create({baseURL:"",timeout:1e3,headers:{"Content-type":"application/x-www-form-urlencoded"}});u.interceptors.request.use(function(e){return e},function(e){return l.a.reject(e)}),u.interceptors.response.use(function(e){return 200===e.status&&1===e.data.code?l.a.resolve(e.data):l.a.reject(e.data)},function(e){return l.a.reject(e)});var d=u,p=function(e){return d.get("/manage/userList",e)},m=function(e){return d.post("/auth/manage/login",e)},f=function(e){return d.post("manage/userDelete",e)},v=function(e){return d.post("/manage/userEdit",e)},h=function(e){return d.post("/auth/register",e)},g=function(e){return d.post("/auth/logout",e)},_={data:function(){return{isCollapse:!1,account:""}},created:function(){this.account=this.$route.query.account},methods:{handleCollapse:function(){this.isCollapse=!this.isCollapse},handleOpen:function(){},handleClose:function(){},handleQuit:function(){var e=this,t=window.sessionStorage.getItem("session"),n=new FormData;n.append("session",t),g(n).then(function(t){e.$message.success("登出成功"),window.sessionStorage.clear(),e.$router.push({path:"/login"})}).catch(function(t){e.$message.error("登出失败")})},handleConfig:function(){this.$router.push({path:"/main/config"})},handleList:function(){this.$router.push({path:"/main/usertable"})}}},b={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticClass:"container"},[n("el-header",{staticClass:"top-bar"},[n("div",{staticClass:"title"},[e._v("后台管理系统")]),e._v(" "),n("div",{staticClass:"person-item"},[n("div",{staticClass:"items"},[n("img",{attrs:{src:"",alt:""}}),e._v(" "),n("span",[e._v(e._s(e.account))])])])]),e._v(" "),n("el-container",[n("el-aside",{staticClass:"aside-bar",attrs:{width:"200px"}},[n("el-row",{staticClass:"tac"},[n("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"1","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b",collapse:e.isCollapse},on:{open:e.handleOpen,close:e.handleClose}},[n("el-menu-item",{on:{click:e.handleCollapse}},[n("i",{staticClass:"el-icon-s-unfold"})]),e._v(" "),n("el-menu-item",{attrs:{index:"1"},on:{click:e.handleList}},[n("i",{staticClass:"el-icon-menu"}),e._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[e._v("用户列表")])]),e._v(" "),n("el-menu-item",{attrs:{index:"2"},on:{click:e.handleConfig}},[n("i",{staticClass:"el-icon-s-tools"}),e._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[e._v("用户配置修改")])]),e._v(" "),n("el-menu-item",{attrs:{index:"3"},on:{click:e.handleQuit}},[n("i",{staticClass:"el-icon-s-custom"}),e._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[e._v("退出")])])],1)],1)],1),e._v(" "),n("el-container",[n("router-view")],1)],1)],1)},staticRenderFns:[]};var x=n("VU/8")(_,b,!1,function(e){n("3K+o")},null,null).exports,C={data:function(){return{userConfig:{username:"",password:""}}},methods:{login:function(){var e=this,t=new FormData;t.append("username",this.userConfig.username),t.append("password",this.userConfig.password),m(t).then(function(t){"普通用户"!==t.data.role?(e.$message.success("登录成功"),window.sessionStorage.setItem("islogined",1),window.sessionStorage.setItem("session",t.data.session),e.$router.push({name:"main",query:{account:e.userConfig.username}})):e.$message.error("用户权限无法登录该系统")}).catch(function(t){e.$message.error("登录失败")})}}},w={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-container"},[n("div",{staticClass:"login-wrapper"},[n("div",{staticClass:"login-box"},[n("div",{staticClass:"login"},[n("el-input",{attrs:{placeholder:"输入账号"},model:{value:e.userConfig.username,callback:function(t){e.$set(e.userConfig,"username",t)},expression:"userConfig.username"}}),e._v(" "),n("el-input",{attrs:{placeholder:"输入密码","show-password":""},model:{value:e.userConfig.password,callback:function(t){e.$set(e.userConfig,"password",t)},expression:"userConfig.password"}}),e._v(" "),n("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")])],1)])])])},staticRenderFns:[]};var y=n("VU/8")(C,w,!1,function(e){n("pKaV")},null,null).exports,$={data:function(){return{isCollapse:!1,titles:[{label:"账户名",prop:"username"},{label:"电子邮件",prop:"email"},{label:"性别",prop:"sex"},{label:"角色",prop:"role"}],tableData:[]}},created:function(){this.getUserList()},methods:{getUserList:function(){var e=this;p().then(function(t){e.tableData=t.data}).catch({})},handleCollapse:function(){this.isCollapse=!this.isCollapse},handleEdit:function(e,t){this.$router.push({path:"/main/useredit",query:{username:e.username,email:e.email,role:e.role}})},handleDelete:function(e,t){var n=this,a=this.$createElement;this.$msgbox({title:"删除提示",message:a("p",null,[a("span",null,"确定删除用户"+e.username+"?")]),showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",callback:function(a){if("confirm"===a){var s=new FormData;s.append("username",e.username),f(s).then(function(e){n.$message.success("删除成功"),n.tableData.splice(t,1)}).catch(function(e){n.$message.error("删除失败")})}}})},handleAdd:function(){this.$router.push({path:"/main/useredit"})}}},U={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-main",{staticClass:"main-bar"},[n("div",{staticClass:"main-header"},[n("el-breadcrumb",{attrs:{separator:"/"}},[n("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("用户列表")])],1)],1),e._v(" "),n("div",{staticClass:"main-action"},[n("el-button",{staticStyle:{border:"none"},attrs:{icon:"el-icon-plus",size:"small"},on:{click:e.handleAdd}},[n("span",[e._v("添加")])])],1),e._v(" "),n("div",{staticClass:"main-content"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[n("el-table-column",{attrs:{type:"index",width:"75px",label:"序号"}}),e._v(" "),e._l(e.titles,function(e,t){return n("el-table-column",{key:t,attrs:{label:e.label,property:e.prop}})}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return e.handleEdit(t.row,t.$index)}}},[e._v("\r\n                                    编辑\r\n                                ")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return e.handleDelete(t.row,t.$index)}}},[e._v("删除")])]}}])})],2)],1)])},staticRenderFns:[]};var k=function(e){return d.post("/manage/userConfig",e)},E={data:function(){return{positions:[{positionName:"本地",positionId:1},{positionName:"CDN服务器",positionId:2}],position:"",imgUrls:[{imgUrlName:"图片服务器1",imgUrlId:1},{imgUrlName:"图片服务器2",imgUrlId:2}],textUrls:[{textUrlName:"文字服务器1",textUrlId:1},{textUrlName:"文字服务器2",textUrlId:2}],imgUrl:"",textUrl:""}},methods:{handleCofig:function(){var e=this,t=new FormData;t.append("position",this.position),t.append("imgposition",this.imgUrl),t.append("textposition",this.textUrl),k(t).then(function(t){e.$message.success("参数设置成功"),e.$router.push({path:"/"})}).catch(function(t){e.$message.error("参数设置失败")})}}},N={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"config-container"},[n("div",{staticClass:"config-box"},[n("div",{staticClass:"config-item"},[n("div",{staticStyle:{color:"gray","margin-bottom":"5px"}},[e._v("存储池配置")]),e._v(" "),n("el-select",{attrs:{placeholder:""},model:{value:e.position,callback:function(t){e.position=t},expression:"position"}},e._l(e.positions,function(e,t){return n("el-option",{key:t,attrs:{label:e.positionName,value:e.positionName}})}),1)],1),e._v(" "),n("div",{staticClass:"config-item"},[n("div",{staticStyle:{color:"gray","margin-bottom":"5px"}},[e._v("图像识别接口配置")]),e._v(" "),n("el-select",{attrs:{placeholder:""},model:{value:e.imgUrl,callback:function(t){e.imgUrl=t},expression:"imgUrl"}},e._l(e.imgUrls,function(e,t){return n("el-option",{key:t,attrs:{label:e.imgUrlName,value:e.imgUrlId}})}),1)],1),e._v(" "),n("div",{staticClass:"config-item"},[n("div",{staticStyle:{color:"gray","margin-bottom":"5px"}},[e._v("文字甄别接口配置")]),e._v(" "),n("el-select",{attrs:{placeholder:""},model:{value:e.textUrl,callback:function(t){e.textUrl=t},expression:"textUrl"}},e._l(e.textUrls,function(e,t){return n("el-option",{key:t,attrs:{label:e.textUrlName,value:e.textUrlId}})}),1)],1),e._v(" "),n("div",{staticClass:"config-item"},[n("el-button",{attrs:{type:"danger"},on:{click:e.handleCofig}},[e._v("提交设置")])],1)])])},staticRenderFns:[]};var S={data:function(){return{roles:[{roleName:"管理员",roleId:1},{roleName:"普通用户",roleId:2}],sexs:[{sexName:"男",sexId:1},{sexName:"女",sexId:2}],role:"",isEdit:!1,username:"",email:"",password:"",sex:""}},created:function(){var e=this.$route.query.username;e&&(this.isEdit=!0,this.username=e,this.email=this.$route.query.email,this.role=this.$route.query.role)},methods:{handleEdit:function(){var e=this,t=new FormData;this.isEdit?(t.append("username",this.username),v(t).then(function(t){e.$message.success("修改成功")}).catch(function(t){e.$message.error("修改失败")})):(t.append("username",this.username),t.append("email",this.email),t.append("password",this.password),t.append("sex",this.sex),h(t).then(function(t){e.$message.success("添加成功")}).catch(function(t){e.$message.error("添加失败")}))}}},I={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page"},[n("div",{staticClass:"head"},[n("el-breadcrumb",{attrs:{separator:"/"}},[n("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[n("el-button",{staticStyle:{border:"none"}},[n("i",{staticClass:"el-icon-back"}),e._v("用户列表")])],1)],1)],1),e._v(" "),n("div",{staticClass:"page"},[n("div",{staticClass:"config-container"},[n("div",{staticClass:"config-box"},[n("div",{staticClass:"config-item"},[n("div",{staticStyle:{color:"gray","margin-bottom":"5px"}},[e._v("用户名")]),e._v(" "),e.isEdit?n("span",[e._v(e._s(e.username))]):n("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),e._v(" "),n("div",{staticClass:"config-item"},[n("div",{staticStyle:{color:"gray","margin-bottom":"5px"}},[e._v("电子邮件")]),e._v(" "),e.isEdit?n("span",[e._v(e._s(e.email))]):n("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),e._v(" "),e.isEdit?e._e():n("div",{staticClass:"config-item"},[n("div",{staticStyle:{color:"gray","margin-bottom":"5px"}},[e._v("密码")]),e._v(" "),n("el-input",{attrs:{placeholder:"请输入密码",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),e._v(" "),e.isEdit?e._e():n("div",{staticClass:"config-item"},[n("div",{staticStyle:{color:"gray","margin-bottom":"5px"}},[e._v("性别")]),e._v(" "),n("el-select",{attrs:{placeholder:""},model:{value:e.sex,callback:function(t){e.sex=t},expression:"sex"}},e._l(e.sexs,function(e,t){return n("el-option",{key:t,attrs:{label:e.sexName,value:e.sexName}})}),1)],1),e._v(" "),n("div",{staticClass:"config-item"},[n("div",{staticStyle:{color:"gray","margin-bottom":"5px"}},[e._v("角色")]),e._v(" "),n("el-select",{attrs:{placeholder:""},model:{value:e.role,callback:function(t){e.role=t},expression:"role"}},e._l(e.roles,function(e,t){return n("el-option",{key:t,attrs:{label:e.roleName,value:e.roleId}})}),1)],1),e._v(" "),n("div",{staticClass:"config-item"},[n("el-button",{attrs:{type:"danger"},on:{click:e.handleEdit}},[e._v("提交设置")])],1)])])])])},staticRenderFns:[]};var D=[{path:"/",redirect:"/main/usertable"},{path:"/main",name:"main",component:x,redirect:"/main/usertable",children:[{name:"userTable",path:"/main/usertable",component:n("VU/8")($,U,!1,function(e){n("Vq92")},null,null).exports},{name:"userConfig",path:"/main/config",component:n("VU/8")(E,N,!1,function(e){n("4phQ")},null,null).exports},{name:"userEdit",path:"/main/useredit",component:n("VU/8")(S,I,!1,function(e){n("utih")},null,null).exports}]},{path:"/login",name:"login",component:y}];a.default.use(o.a);var F=new o.a({routes:D});F.beforeEach(function(e,t,n){"1"!==window.sessionStorage.getItem("islogined")&&"/login"!==e.fullPath?n("/login"):n()});var q=F,V=n("zL8q"),R=n.n(V);n("tvR6");a.default.config.productionTip=!1,a.default.use(R.a),new a.default({el:"#app",router:q,components:{App:i},template:"<App/>"})},Vq92:function(e,t){},lx7Z:function(e,t){},pKaV:function(e,t){},tvR6:function(e,t){},utih:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.a4f4902b4201634ba6f3.js.map